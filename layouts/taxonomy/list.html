{{ define "main" }}
<div class="container" style="padding-top: 40px; padding-bottom: 60px;">

    {{ if eq .Section "iller" }}
    <!-- Quick City Stats/Categories -->
    <div style="display: flex; gap: 10px; margin-bottom: 30px; flex-wrap: wrap;">
        <!-- Simple pure-JS filtering buttons could also go here, or just direct links if we had specific pages -->
        <span class="badge" style="background: #e3f2fd; color: #1976d2;">ğŸ° {{ .Title }} - TÃ¼m Eserler</span>
        <!-- Note: Real category links within a city would require more complex filtering logic or params, keeping simple for now -->
    </div>
    {{ end }}
    <!-- Header -->
    <!-- Dynamic Header -->
    <div
        style="margin-bottom: 40px; border-bottom: 1px solid var(--border); padding-bottom: 20px; display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 20px;">
        <div>
            <span
                style="font-size: 0.9rem; text-transform: uppercase; letter-spacing: 1px; color: var(--text-light); display: block; margin-bottom: 5px;">
                {{ if eq .Section "iller" }}ğŸ“ Åehir Rehberi{{ else }}ğŸ“‚ Kategori{{ end }}
            </span>
            <h1 style="font-size: 2.5rem; margin: 0;">
                {{ if eq .Section "iller" }}
                {{ .Title }} Tarihi Yerler
                {{ else }}
                {{ .Title }}
                {{ end }}
            </h1>
            {{ if eq .Section "iller" }}
            <p style="color: var(--text-light); margin-top: 5px; font-size: 1.1rem;">
                {{ .Title }} ilindeki camileri, mÃ¼zeleri, antik kentleri ve diÄŸer tarihi yapÄ±larÄ± keÅŸfedin.
            </p>
            {{ end }}
        </div>
        <div style="font-size: 1.1rem; color: var(--text-light);">
            Toplam <strong>{{ len .Paginator.Pages }}</strong> eser listeleniyor
        </div>
    </div>

    <!-- Breadcrumb -->
    <nav style="margin-bottom: 30px; font-size: 0.9rem;">
        <a href="/">Anasayfa</a> <span style="margin: 0 10px; color: var(--text-light);">/</span>
        {{ if eq .Section "iller" }}
        <a href="/iller">Ä°ller</a>
        {{ else if eq .Section "turler" }}
        <a href="/turler">TÃ¼rler</a>
        {{ else }}
        <a href="/{{ .Section }}">{{ .Section | humanize }}</a>
        {{ end }}
        <span style="margin: 0 10px; color: var(--text-light);">/</span>
        <span style="font-weight: 600;">{{ .Title }}</span>
    </nav>

    <!-- Advanced Filters -->
    {{ partial "advanced-filters.html" . }}

    <!-- Grid -->
    <div class="card-grid">
        {{ range .Paginator.Pages }}
        <article class="card" data-title="{{ .Title | lower }}" data-city="{{ .Params.province | lower }}"
            data-type="{{ .Params.type | lower }}">
            <a href="{{ .Permalink }}" class="card-img-wrap">
                {{ $img := .Params.image | default .Params.featured_image | default .Params.cover }}
                {{ if $img }}
                <img src="{{ $img }}" alt="{{ .Title }}" class="card-img" loading="lazy">
                {{ else }}
                <div
                    style="width: 100%; height: 100%; background: linear-gradient(135deg, var(--primary-light), var(--primary)); display: flex; align-items: center; justify-content: center; color: white; font-size: 2rem;">
                    ğŸ›ï¸
                </div>
                {{ end }}
            </a>
            <div class="card-content">
                <div class="card-meta">
                    <span>ğŸ“ {{ .Params.province }}</span>
                    <span class="badge">{{ .Params.type }}</span>
                </div>
                <h2 class="card-title">
                    <a href="{{ .Permalink }}">{{ .Title }}</a>
                </h2>
                <div class="card-cart-action" style="margin-top: auto; padding-top: 15px;">
                    <a href="{{ .Permalink }}"
                        style="color: var(--secondary); font-weight: 600; font-size: 0.9rem;">Ä°ncele &rarr;</a>
                </div>
            </div>
        </article>
        {{ end }}
    </div>

    <!-- Pagination -->
    {{ if gt .Paginator.TotalPages 1 }}
    <div style="margin-top: 50px; display: flex; justify-content: center; gap: 10px;">
        {{ if .Paginator.HasPrev }}
        <a href="{{ .Paginator.Prev.URL }}" class="btn btn-outline"
            style="color: var(--primary); border-color: var(--border);">Â« Ã–nceki</a>
        {{ end }}

        <span style="display: flex; align-items: center; padding: 0 15px; font-weight: 600;">
            {{ .Paginator.PageNumber }} / {{ .Paginator.TotalPages }}
        </span>

        {{ if .Paginator.HasNext }}
        <a href="{{ .Paginator.Next.URL }}" class="btn btn-outline"
            style="color: var(--primary); border-color: var(--border);">Sonraki Â»</a>
        {{ end }}
    </div>
    {{ end }}
</div>
{{ end }}